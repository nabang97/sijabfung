!function(a){var e={};function n(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return a[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=a,n.c=e,n.d=function(a,e,t){n.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},n.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,e){if(1&e&&(a=n(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var i in a)n.d(t,i,function(e){return a[e]}.bind(null,i));return t},n.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(e,"a",e),e},n.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},n.p="/",n(n.s=67)}({67:function(a,e,n){a.exports=n(68)},68:function(a,e){var n,t=$('meta[name="csrf-token"]').attr("content"),i=$("#tablePegawai").DataTable({processing:!0,ajax:{url:"/api/pegawai",dataType:"json",cache:!1,dataSrc:""},order:[[1,"asc"]],columns:[{render:function(a,e,n,t){return t.row+t.settings._iDisplayStart+1}},{data:"nip"},{data:"name"},{data:"birthday_place"},{data:"birthday_date",render:function(a,e,n,t){return Date.parse(a).toString("dd MMMM yyyy")}},{data:"golongans.name"},{data:"jenjang_jabatan.detail_jabfung.jabfung.nama"},{data:"jenjang_jabatan.nama"},{defaultContent:'<button type="button" id="btnEditPegawai" data-toggle="modal" data-target="#modalEditPegawai" class="btn btn-sm btn-primary" >Edit</button> <button type="button"  id="btnRemovePegawai" class="btn btn-sm btn-primary">Remove</button>'}]});$.get("/api/golongan",(function(a,e){a.forEach((function(a){$('select[name="golongan"]').append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))}));var r=function(){return $.get("/api/instansi-pembina",(function(a,e){var n=$('select[name="instansi_pembina"]');n.empty(),n.append("<option>Pilih Instansi Pembina</option>"),a.forEach((function(a){n.append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},u=function(a){return $.get("/api/rumpun-jabatan-option",{id:a},(function(a,e){var n=$('select[name="rumpun_jabatan"]');n.empty(),n.append("<option>Pilih Rumpun Jabatan</option>"),a.forEach((function(a){n.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},o=function(a){return $.get("/api/jabatan-fungsional-option",{id:a},(function(a,e){var n=$('select[name="jabatan_fungsional"]');n.empty(),n.append("<option>Pilih Jabatan Fungsional</option>"),a.forEach((function(a){n.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},l=function(a){return $.get("/api/jenjang-jabatan/option",{id_jabfung:a,_token:t},(function(a,e){var n=$('select[name="jenjang_kategori_lingkup"]');n.empty(),n.append("<option>Pilih Jenjang-Kategori-Lingkup</option>"),a.forEach((function(a){n.append("<option value=".concat(a.id,">").concat(a.jenjang," - ").concat(a.kategori," - ").concat(1==a.lingkup?"Pusat":"Daerah","</option>"))}))})).done((function(a){})).fail((function(a){}))},s=function(a){$(".alert")&&$(".alert").remove();var e=$(".modal-body");n=a.nip,e.find('input[name="nip"]').val(a.nip),e.find('input[name="unit_kerja_saat_ini"]').val(a.unit_kerja),e.find('input[name="nama"]').val(a.name),e.find('input[name="tempat_lahir"]').val(a.birthday_place),e.find('input[name="tanggal_lahir"]').val(Date.parse(a.birthday_date).toString("MM-dd-yyyy")),e.find('select[name="golongan"]').val(a.golongan),r().done((function(){e.find('select[name="instansi_pembina"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.instansi_pembina.id)})).then((function(){return new Promise((function(){u(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id_instansi).done((function(){e.find('select[name="rumpun_jabatan"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id)})).then((function(){return new Promise((function(){o(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id).done((function(){e.find('select[name="jabatan_fungsional"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.id)})).then((function(){return new Promise((function(){l(a.jenjang_jabatan.detail_jabfung.jabfung.id).done((function(){e.find('select[name="jenjang_kategori_lingkup"]').val(a.jenjang_jabatan.id)}))}))}))}))}))}))})),function(a){$.post("/api/pegawai/account",{nip:a,_token:t}).done((function(a){$('input[name="email"]').val(a.email)})).fail((function(a){})).always((function(a){}))}(a.nip)},d=function(a){return $(".alert")&&$(".alert").remove(),$.post("/api/register/create/account",{data:a,_token:t}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):($(".data-alert").before('<div class="alert alert-success">'.concat(a.message,"</div>")),i.ajax.reload(),document.getElementById("form-regis").reset())})).fail((function(a){}))};$(document).ready((function(){$("#addPegawai").click((function(){r()})),$('select[name="instansi_pembina"]').change((function(){u($(this).val()),$('select[name="jabatan_fungsional"]').empty(),$('select[name="jabatan_fungsional"]').append("<option>Pilih Jabatan Fungsional</option>")})),$('select[name="rumpun_jabatan"]').change((function(){o($(this).val())})),$('select[name="jabatan_fungsional"]').change((function(){var a={id_jabfung:$(this).val()};l(a)})),i.on("order.dt search.dt",(function(){i.column(0,{search:"applied",order:"applied"}).nodes().each((function(a,e){a.innerHTML=e+1}))})).draw(),$("#tablePegawai tbody ").on("click","button",(function(){var a=i.row($(this).parents("tr")).data();"btnEditPegawai"==this.id&&s(a),"btnRemovePegawai"==this.id&&function(a){$.post("/api/pegawai/destroy",{nip:a,_token:t}).done((function(a){i.ajax.reload()})).fail((function(a){})).always((function(a){}))}(a.nip)})),$.validator.addMethod("valueEquals",(function(a,e,n){return n!=a}),"Value must equal arg."),$.validator.addMethod("valueNotEquals",(function(a,e,n){return a==$('input[name="new_password"]').val()}),"Password and confirm password fields do not match"),$.validator.addMethod("passwordCheck",(function(a,e,n){return!!new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(a)}),"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character");$("#form-regis").validate({rules:{email:{required:!0,email:!0},password:{required:!0,passwordCheck:!1},confirm_password:{required:!0,valueNotEquals:!0},nama:{required:!0},nip:{required:!0,maxlength:18,number:!0,minlength:18},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,date:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{email:{required:"Email is required"},password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"},nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 18 karakter",minlength:"Panjang data harus 18 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){var e,n,i,r,u,o,l,s,c,p;n=$('input[name="email"]').val(),i=$('input[name="new_password"]').val(),r=$('input[name="confirm_password"]').val(),u=$('input[name="nip"]').val(),o=$('input[name="nama"]').val(),l=$('input[name="tempat_lahir"]').val(),s=null!=$('input[name="tanggal_lahir"]').val()?Date.parse($('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"):null,c=$('select[name="jenjang_kategori_lingkup"]').val(),p=$('input[name="unit_kerja_saat_ini"]').val(),e={email:n,password:i,confirm_password:r,nip:u,name:o,golongan:$('select[name="golongan"]').val(),tempat_lahir:l,tanggal_lahir:s,jenjang_kategori_lingkup:c,unit_kerja_saat_ini:p},$(".alert-sijabfung")&&$(".alert-sijabfung").remove(),$.post("/api/register/create",{data:e,_token:t}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):d(e)})).fail((function(a){}))}}),$("#form-update-account").validate({rules:{email:{required:!0,email:!0},new_password:{required:!0,passwordCheck:!1},confirm_password:{required:!0,valueNotEquals:!0}},messages:{email:{required:"Email is required"},new_password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"}},submitHandler:function(a){!function(a){$.post("/api/pegawai/account/update",{_token:t,data:a}).done((function(a){})).fail((function(a){console.log(a)}))}({email:$(a).find('input[name="email"]').val(),password:$(a).find('input[name="new_password"]').val(),nip:n})}}),$("#form-update-pegawai").validate({rules:{nama:{required:!0},nip:{required:!0,maxlength:18,number:!0,minlength:18},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,date:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 18 karakter",minlength:"Panjang data harus 18 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){!function(a){$(".alert")&&$(".alert").remove(),$.post("/api/pegawai/update",{data:a,_token:t}).done((function(e){e.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(e.message,"</div>")):(n=a.nip,$(".data-alert").before('<div class="alert alert-success">'.concat(e.message,"</div>")),i.ajax.reload())})).fail((function(a){console.log(a),$(".data-alert").before('<div class="alert alert-danger">Terjadi kesalahan pada server. Silakan hubungi operator dan coba beberapa saat lagi.</div>')})).always((function(a){}))}({nipBeforeUpdate:parseInt(n),nip:$(a).find('input[name="nip"]').val(),name:$(a).find('input[name="nama"]').val(),birthday_date:Date.parse($(a).find('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"),birthday_place:$(a).find('input[name="tempat_lahir"]').val(),golongan:$(a).find('select[name="golongan"]').val(),id_jenjang_jabfung:$(a).find('select[name="jenjang_kategori_lingkup"]').val(),unit_kerja:$(a).find('input[name="unit_kerja_saat_ini"]').val()})}}),$(".datepicker").datepicker({dateFormat:"mm-dd-yy",todayBtn:"linked",clearBtn:!0,changeYear:!0,changeMonth:!0,yearRange:"c-60:c"})}))}});