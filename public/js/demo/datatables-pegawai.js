!function(a){var n={};function e(i){if(n[i])return n[i].exports;var t=n[i]={i:i,l:!1,exports:{}};return a[i].call(t.exports,t,t.exports,e),t.l=!0,t.exports}e.m=a,e.c=n,e.d=function(a,n,i){e.o(a,n)||Object.defineProperty(a,n,{enumerable:!0,get:i})},e.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,n){if(1&n&&(a=e(a)),8&n)return a;if(4&n&&"object"==typeof a&&a&&a.__esModule)return a;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:a}),2&n&&"string"!=typeof a)for(var t in a)e.d(i,t,function(n){return a[n]}.bind(null,t));return i},e.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(n,"a",n),n},e.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},e.p="/",e(e.s=67)}({67:function(a,n,e){a.exports=e(68)},68:function(a,n){var e,i=$('meta[name="csrf-token"]').attr("content"),t=$("#tablePegawai").DataTable({processing:!0,ajax:{url:"/api/pegawai",dataType:"json",cache:!1,dataSrc:""},order:[[1,"asc"]],columns:[{render:function(a,n,e,i){return i.row+i.settings._iDisplayStart+1}},{data:"nip"},{data:"name"},{data:"birthday_place"},{data:"birthday_date",render:function(a,n,e,i){return Date.parse(a).toString("dd MMMM yyyy")}},{data:"golongans.name"},{data:"jenjang_jabatan.detail_jabfung.jabfung.nama"},{data:"jenjang_jabatan.nama"},{defaultContent:'<button type="button" id="btnEditPegawai" data-toggle="modal" data-target="#modalEditPegawai" class="btn btn-sm btn-primary" >Edit</button> <button type="button"  id="btnRemovePegawai" class="btn btn-sm btn-primary">Remove</button>'}]});$.get("/api/golongan",(function(a,n){a.forEach((function(a){$('select[name="golongan"]').append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))}));var r=function(){return $.get("/api/instansi-pembina",(function(a,n){var e=$('select[name="instansi_pembina"]');e.empty(),e.append("<option>Pilih Instansi Pembina</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},o=function(a){return $.get("/api/rumpun-jabatan-option",{id:a},(function(a,n){var e=$('select[name="rumpun_jabatan"]');e.empty(),e.append("<option>Pilih Rumpun Jabatan</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){console.log(a)})).fail((function(a){})).always((function(a){}))},u=function(a){return console.log(a),$.get("/api/jabatan-fungsional-option",{id:a},(function(a,n){var e=$('select[name="jabatan_fungsional"]');e.empty(),e.append("<option>Pilih Jabatan Fungsional</option>"),a.forEach((function(a){console.log(a.id),e.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){console.log(a)})).fail((function(a){})).always((function(a){}))},l=function(a){return console.log("Jenajng kateg",a),$.get("/api/jenjang-jabatan/option",{id_jabfung:a,_token:i},(function(a,n){var e=$('select[name="jenjang_kategori_lingkup"]');e.empty(),e.append("<option>Pilih Jenjang-Kategori-Lingkup</option>"),a.forEach((function(a){console.log(a),e.append("<option value=".concat(a.id,">").concat(a.jenjang," - ").concat(a.kategori," - ").concat(1==a.lingkup?"Pusat":"Daerah","</option>"))}))})).done((function(a){console.log(a)})).fail((function(a){console.log(a)})).always((function(a){console.log(a)}))},s=function(a){var n=$(".modal-body");e=a.nip,n.find('input[name="nip"]').val(a.nip),n.find('input[name="unit_kerja_saat_ini"]').val(a.unit_kerja),n.find('input[name="nama"]').val(a.name),n.find('input[name="tempat_lahir"]').val(a.birthday_place),n.find('input[name="tanggal_lahir"]').val(Date.parse(a.birthday_date).toString("dd-MM-yyyy")),n.find('select[name="golongan"]').val(a.golongan),r().done((function(){n.find('select[name="instansi_pembina"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.instansi_pembina.id)})).then((function(){return new Promise((function(){o(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id_instansi).done((function(){n.find('select[name="rumpun_jabatan"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id)})).then((function(){return new Promise((function(){u(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id).done((function(){n.find('select[name="jabatan_fungsional"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.id)})).then((function(){return new Promise((function(){l(a.jenjang_jabatan.detail_jabfung.jabfung.id).done((function(){n.find('select[name="jenjang_kategori_lingkup"]').val(a.jenjang_jabatan.id)}))}))}))}))}))}))})),function(a){$.post("/api/pegawai/account",{nip:a,_token:i}).done((function(a){$('input[name="email"]').val(a.email)})).fail((function(a){})).always((function(a){}))}(a.nip)},d=function(a){return $(".alert")&&$(".alert").remove(),$.post("/api/register/create/account",{data:a,_token:i}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):($(".data-alert").before('<div class="alert alert-success">'.concat(a.message,"</div>")),t.ajax.reload(),document.getElementById("form-regis").reset())})).fail((function(a){}))};$(document).ready((function(){$("#addPegawai").click((function(){r()})),$('select[name="instansi_pembina"]').change((function(){console.log($(this).val()),o($(this).val()),$('select[name="jabatan_fungsional"]').empty(),$('select[name="jabatan_fungsional"]').append("<option>Pilih Jabatan Fungsional</option>")})),$('select[name="rumpun_jabatan"]').change((function(){console.log($(this).val()),u($(this).val())})),$('select[name="jabatan_fungsional"]').change((function(){var a={id_jabfung:$(this).val()};l(a)})),t.on("order.dt search.dt",(function(){t.column(0,{search:"applied",order:"applied"}).nodes().each((function(a,n){a.innerHTML=n+1}))})).draw(),$("#tablePegawai tbody ").on("click","button",(function(){var a=t.row($(this).parents("tr")).data();"btnEditPegawai"==this.id&&s(a),"btnRemovePegawai"==this.id&&function(a){$.post("/api/pegawai/destroy",{nip:a}).done((function(a){t.ajax.reload(),console.log(a)})).fail((function(a){console.log(a)})).always((function(a){console.log(a)}))}(a.nip)})),$.validator.addMethod("valueEquals",(function(a,n,e){return e!=a}),"Value must equal arg."),$.validator.addMethod("valueNotEquals",(function(a,n,e){return a==$('input[name="new_password"]').val()}),"Password and confirm password fields do not match"),$.validator.addMethod("passwordCheck",(function(a,n,e){return!!new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(a)}),"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character");$("#form-regis").validate({rules:{email:{required:!0,email:!0},password:{required:!0,passwordCheck:!0},confirm_password:{required:!0,valueNotEquals:!0},nama:{required:!0},nip:{required:!0,maxlength:9,number:!0,minlength:9},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,date:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{email:{required:"Email is required"},password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"},nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 9 karakter",minlength:"Panjang data harus 9 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){var n,e,t,r,o,u,l,s,c,p;e=$('input[name="email"]').val(),t=$('input[name="new_password"]').val(),r=$('input[name="confirm_password"]').val(),o=$('input[name="nip"]').val(),u=$('input[name="nama"]').val(),l=$('input[name="tempat_lahir"]').val(),s=null!=$('input[name="tanggal_lahir"]').val()?Date.parse($('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"):null,c=$('select[name="jenjang_kategori_lingkup"]').val(),p=$('input[name="unit_kerja_saat_ini"]').val(),n={email:e,password:t,confirm_password:r,nip:o,name:u,golongan:$('select[name="golongan"]').val(),tempat_lahir:l,tanggal_lahir:s,jenjang_kategori_lingkup:c,unit_kerja_saat_ini:p},$(".alert-sijabfung")&&$(".alert-sijabfung").remove(),$.post("/api/register/create",{data:n,_token:i}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):d(n)})).fail((function(a){console.log(a)}))}}),$("#form-update-account").validate({rules:{email:{required:!0,email:!0},new_password:{required:!0,passwordCheck:!0},confirm_password:{required:!0,valueNotEquals:!0}},messages:{email:{required:"Email is required"},new_password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"}},submitHandler:function(a){!function(a){console.log(a),$.post("/api/pegawai/account/update",{_token:i,data:a}).done((function(a){console.log(a)})).fail((function(a){console.log(a)}))}({email:$(a).find('input[name="email"]').val(),password:$(a).find('input[name="new_password"]').val(),nip:e})}}),$("#form-update-pegawai").validate({rules:{nama:{required:!0},nip:{required:!0,maxlength:9,number:!0,minlength:9},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,date:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 9 karakter",minlength:"Panjang data harus 9 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){var n={nipBeforeUpdate:e,nip:$(a).find('input[name="nip"]').val(),name:$(a).find('input[name="nama"]').val(),birthday_date:Date.parse($(a).find('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"),birthday_place:$(a).find('input[name="tempat_lahir"]').val(),golongan:$(a).find('select[name="golongan"]').val(),id_jenjang_jabfung:$(a).find('select[name="jenjang_kategori_lingkup"]').val(),unit_kerja:$(a).find('input[name="unit_kerja_saat_ini"]').val()};console.log(n),function(a){$.post("/api/pegawai/update",{data:a,_token:i}).done((function(n){t.ajax.reload(),n.error||(e=a.nip),console.log(n)})).fail((function(a){console.log(a)})).always((function(a){console.log(a)}))}(n)}}),$(".datepicker").datepicker({dateFormat:"mm-dd-yy",todayBtn:"linked",clearBtn:!0,changeYear:!0,changeMonth:!0,yearRange:"c-60:c"})}))}});