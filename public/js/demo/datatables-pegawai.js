!function(a){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return a[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=a,e.c=n,e.d=function(a,n,t){e.o(a,n)||Object.defineProperty(a,n,{enumerable:!0,get:t})},e.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,n){if(1&n&&(a=e(a)),8&n)return a;if(4&n&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&n&&"string"!=typeof a)for(var i in a)e.d(t,i,function(n){return a[n]}.bind(null,i));return t},e.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(n,"a",n),n},e.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},e.p="/",e(e.s=67)}({67:function(a,n,e){a.exports=e(68)},68:function(a,n){var e,t,i,r=$('meta[name="csrf-token"]').attr("content"),l=$("#tablePegawai").DataTable({processing:!0,serverSide:!0,ajax:{url:"/api/pegawai",dataType:"json",cache:!1,data:{jenjang:function(){return"all"},jabfung:function(){return"all"}}},columns:[{render:function(a,n,e,t){return t.row+t.settings._iDisplayStart+1}},{data:"nip"},{data:"name"},{render:function(a,n,e,t){return"".concat(e.birthday_place,", ").concat(new Date(e.birthday_date).toString("d MMMM yyyy"))}},{data:"golongans.name"},{data:"jenjang_jabatan.detail_jabfung.jabfung.nama"},{data:"unit_kerja"},{defaultContent:'<button type="button" id="btnViewDiklat" data-toggle="modal" data-target="#modalViewDiklat" class="btn btn-sm btn-primary" >View Diklat</button>'},{defaultContent:'<button type="button" id="btnEditPegawai" data-toggle="modal" data-target="#modalEditPegawai" class="btn btn-sm btn-primary" >Edit</button> <button type="button"  id="btnRemovePegawai" class="btn btn-sm btn-danger">Remove</button>'}]});$.get("/api/golongan",(function(a,n){a.forEach((function(a){$('select[name="golongan"]').append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))}));var u=function(){return $.get("/api/instansi-pembina",(function(a,n){var e=$('select[name="instansi_pembina"]');e.empty(),e.append("<option>Pilih Instansi Pembina</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.name,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},o=function(a){return $.get("/api/rumpun-jabatan-option",{id:a},(function(a,n){var e=$('select[name="rumpun_jabatan"]');e.empty(),e.append("<option>Pilih Rumpun Jabatan</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},d=function(a){return $.get("/api/jabatan-fungsional-option",{id:a},(function(a,n){var e=$('select[name="jabatan_fungsional"]');e.empty(),e.append("<option>Pilih Jabatan Fungsional</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.nama,"</option>"))}))})).done((function(a){})).fail((function(a){})).always((function(a){}))},s=function(a){return $.get("/api/jenjang-jabatan/option",{id_jabfung:a,_token:r},(function(a,n){var e=$('select[name="jenjang_kategori_lingkup"]');e.empty(),e.append("<option>Pilih Jenjang-Kategori-Lingkup</option>"),a.forEach((function(a){e.append("<option value=".concat(a.id,">").concat(a.jenjang," - ").concat(a.kategori," - ").concat(1==a.lingkup?"Pusat":"Daerah","</option>"))}))})).done((function(a){})).fail((function(a){}))},c=function(a){$(".alert")&&$(".alert").remove();var n=$(".modal-body");e=a.nip,n.find('input[name="nip"]').val(a.nip),n.find('input[name="unit_kerja_saat_ini"]').val(a.unit_kerja),n.find('input[name="nama"]').val(a.name),n.find('input[name="tempat_lahir"]').val(a.birthday_place),n.find('input[name="tanggal_lahir"]').val(new Date(a.birthday_date).toString("dd-MM-yyyy")),n.find('select[name="golongan"]').val(a.golongan),u().done((function(){n.find('select[name="instansi_pembina"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.instansi_pembina.id)})).then((function(){return new Promise((function(){o(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id_instansi).done((function(){n.find('select[name="rumpun_jabatan"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id)})).then((function(){return new Promise((function(){d(a.jenjang_jabatan.detail_jabfung.jabfung.rumpun_jabatan.id).done((function(){n.find('select[name="jabatan_fungsional"]').val(a.jenjang_jabatan.detail_jabfung.jabfung.id)})).then((function(){return new Promise((function(){s(a.jenjang_jabatan.detail_jabfung.jabfung.id).done((function(){n.find('select[name="jenjang_kategori_lingkup"]').val(a.jenjang_jabatan.id)}))}))}))}))}))}))})),function(a){$.post("/api/pegawai/account",{nip:a,_token:r}).done((function(a){$('input[name="email"]').val(a.email)})).fail((function(a){})).always((function(a){}))}(a.nip)},m=function(a){return $(".alert")&&$(".alert").remove(),$.post("/api/register/create/account",{data:a,_token:r}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):($(".data-alert").before('<div class="alert alert-success">'.concat(a.message,"</div>")),l.ajax.reload(),document.getElementById("form-regis").reset())})).fail((function(a){}))},p=function(a){(i=$("#tableDiklat").DataTable()).clear().draw(),$.get("/pegawai/diklat",a,(function(a,n){})).done((function(n){if(0!=n.length){var e=0;n.forEach((function(a){e+=1,i.row.add([e,a.name,a.tahun_mengikuti,'<button class="btn btn-primary" id="btnEditDiklat" name="'.concat(a.id,'">Edit</button>\n                        <button class="btn btn-danger" id="btnRemoveDiklat" name="').concat(a.id,'">Remove</button>')]).draw()}))}$("#modalViewDiklatLabel").html(a.name)})).fail((function(a){}))};$(document).ready((function(){$("#addPegawai").click((function(){u()})),$('select[name="instansi_pembina"]').change((function(){o($(this).val()),$('select[name="jabatan_fungsional"]').empty(),$('select[name="jabatan_fungsional"]').append("<option>Pilih Jabatan Fungsional</option>")})),$('select[name="rumpun_jabatan"]').change((function(){d($(this).val())})),$('select[name="jabatan_fungsional"]').change((function(){var a={id_jabfung:$(this).val()};s(a)})),l.on("order.dt search.dt",(function(){l.column(0,{search:"applied",order:"applied"}).nodes().each((function(a,n){a.innerHTML=n+1}))})).draw(),$("#tablePegawai tbody ").on("click","button",(function(){var a=l.row($(this).parents("tr")).data();"btnEditPegawai"==this.id&&c(a),"btnRemovePegawai"==this.id&&function(a){$.post("/api/pegawai/destroy",{nip:a,_token:r}).done((function(a){l.ajax.reload()})).fail((function(a){})).always((function(a){}))}(a.nip),"btnViewDiklat"==this.id&&(t=a.nip,p(a),$(".edit-diklat-container").hide(),$(".add-diklat-container").hide())})),$("#btnAddDiklat").click((function(){$(".edit-diklat-container")&&$(".edit-diklat-container").hide(),$(".add-diklat-container")&&$(".add-diklat-container").hide(),$(".add-diklat-container").show()}));$("#tableDiklat tbody ").on("click","button",(function(){var a=$("#tableDiklat").DataTable().row($(this).parents("tr")).data(),n={nip:t,id:this.name,name:a[1],tahun_mengikuti:a[2]};"btnEditDiklat"==this.id&&($(".edit-diklat-container").show(),$(".alert")&&$(".alert").remove(),$(".add-diklat-container")&&$(".add-diklat-container").hide(),$("#form-edit-diklat").validate().resetForm(),$(this).find(".error").removeClass("error"),function(a){var n=$(".edit-diklat-container");n.find('input[name="id_diklat"').val(a.id),n.find('input[name="nama_diklat"').val(a.name),n.find('input[name="tahun_diklat"').val(a.tahun_mengikuti)}(n)),"btnRemoveDiklat"==this.id&&function(a){$.post("/api/pegawai/diklat/destroy",{data:a,_token:r}).done((function(n){$(".edit-diklat-container")&&($("#form-edit-diklat")[0].reset(),$(".edit-diklat-container").hide()),p(a)})).fail((function(a){})).always((function(a){}))}(n)})),$.validator.addMethod("valueEquals",(function(a,n,e){return e!=a}),"Value must equal arg."),$.validator.addMethod("indonesianDate",(function(a,n){return Date.parseExact(a,"d-M-yyyy")}),"Format tanggal tidak valid"),$.validator.addMethod("valueNotEquals",(function(a,n,e){return a==$('input[name="new_password"]').val()}),"Password and confirm password fields do not match"),$.validator.addMethod("passwordCheck",(function(a,n,e){return!!new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(a)}),"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character");$("#form-regis").validate({rules:{email:{required:!0,email:!0},password:{required:!0,passwordCheck:!1},confirm_password:{required:!0,valueNotEquals:!0},nama:{required:!0},nip:{required:!0,maxlength:18,number:!0,minlength:18},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,indonesianDate:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{email:{required:"Email is required"},password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"},nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 18 karakter",minlength:"Panjang data harus 18 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){var n,e,t,i,l,u,o,d,s,c;e=$('input[name="email"]').val(),t=$('input[name="new_password"]').val(),i=$('input[name="confirm_password"]').val(),l=$('input[name="nip"]').val(),u=$('input[name="nama"]').val(),o=$('input[name="tempat_lahir"]').val(),d=null!=$('input[name="tanggal_lahir"]').val()?Date.parse($('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"):null,s=$('select[name="jenjang_kategori_lingkup"]').val(),c=$('input[name="unit_kerja_saat_ini"]').val(),n={email:e,password:t,confirm_password:i,nip:l,name:u,golongan:$('select[name="golongan"]').val(),tempat_lahir:o,tanggal_lahir:d,jenjang_kategori_lingkup:s,unit_kerja_saat_ini:c},$(".alert-sijabfung")&&$(".alert-sijabfung").remove(),$.post("/api/register/create",{data:n,_token:r}).done((function(a){a.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(a.message,"</div>")):m(n)})).fail((function(a){}))}}),$("#form-update-account").validate({rules:{email:{required:!0,email:!0},new_password:{required:!0,passwordCheck:!1},confirm_password:{required:!0,valueNotEquals:!0}},messages:{email:{required:"Email is required"},new_password:{required:"Sandi is required",passwordCheck:"Password must be eight characters or longer, contain at least 1 lowercase alphabetical character, 1 uppercase alphabetical character,1 numeric character, least one special character"},confirm_password:{required:"Konfirm Sandi is required",valueNotEquals:"Sandi dan Konfirmasi Sandi tidak cocok"}},submitHandler:function(a){!function(a){$.post("/api/pegawai/account/update",{_token:r,data:a}).done((function(a){})).fail((function(a){}))}({email:$(a).find('input[name="email"]').val(),password:$(a).find('input[name="new_password"]').val(),nip:e})}}),$("#form-update-pegawai").validate({rules:{nama:{required:!0},nip:{required:!0,maxlength:18,number:!0,minlength:18},tempat_lahir:{required:!0},tanggal_lahir:{required:!0,date:!0},golongan:{required:!0,valueEquals:0},instansi_pembina:{required:!0,valueEquals:0},rumpun_jabatan:{required:!0,valueEquals:0},jabatan_fungsional:{required:!0,valueEquals:0},jenjang_kategori_lingkup:{required:!0,valueEquals:0},unit_kerja_saat_ini:{required:!0,valueEquals:0}},messages:{nama:{required:"Nama is required"},nip:{required:"NIP is required",maxlength:"Panjang data harus 18 karakter",minlength:"Panjang data harus 18 karakter",number:"Data harus berupa angka"},tempat_lahir:{required:"Tempat lahir is required"},tanggal_lahir:{required:"Tanggal lahir is required"},golongan:{required:"Golongan is required",valueEquals:"Please select an item!"},instansi_pembina:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},rumpun_jabatan:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jabatan_fungsional:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},jenjang_kategori_lingkup:{required:"Instansi Pembina is required",valueEquals:"Please select an item!"},unit_kerja_saat_ini:{required:"Unit kerja is required"}},submitHandler:function(a){!function(a){$(".alert")&&$(".alert").remove(),$.post("/api/pegawai/profile/update",{data:a,_token:r}).done((function(n){n.error?$(".data-alert").before('<div class="alert alert-danger">'.concat(n.message,"</div>")):(e=a.nip,$(".data-alert").before('<div class="alert alert-success">'.concat(n.message,"</div>")),l.ajax.reload())})).fail((function(a){$(".data-alert").before('<div class="alert alert-danger">Terjadi kesalahan pada server. Silakan hubungi operator dan coba beberapa saat lagi.</div>')})).always((function(a){}))}({nipBeforeUpdate:e,nip:$(a).find('input[name="nip"]').val(),name:$(a).find('input[name="nama"]').val(),birthday_date:Date.parse($(a).find('input[name="tanggal_lahir"]').val()).toString("yyyy-MM-dd"),birthday_place:$(a).find('input[name="tempat_lahir"]').val(),golongan:$(a).find('select[name="golongan"]').val(),id_jenjang_jabfung:$(a).find('select[name="jenjang_kategori_lingkup"]').val(),unit_kerja:$(a).find('input[name="unit_kerja_saat_ini"]').val()})}}),$(".datepicker").datepicker({dateFormat:"dd-mm-yy",todayBtn:"linked",clearBtn:!0,changeYear:!0,changeMonth:!0,yearRange:"c-65:c"})})),$.validator.addMethod("yearCheck",(function(a,n,e){return a<=(new Date).getFullYear()}),"Tahun mengikuti diklat tidak boleh melewati tahun ini"),$("#modalAddPegawai").on("show.bs.modal",(function(a){$("#form-regis")[0].reset(),$("#form-regis").validate().resetForm(),$(this).find(".error").removeClass("error")})),$("#form-edit-diklat").validate({rules:{nama_diklat:{required:!0},tahun_diklat:{required:!0,minlength:4,maxlength:4,number:!0,yearCheck:!0}},messages:{nama_diklat:{required:"Nama harus diisi"},tahun_diklat:{required:"Tahun harus diisi",minlength:"Panjang tahun minimal 4 karakter",maxlength:"Panjang tahun maksimal 4 karakter",number:"Tahun harus berupa angka"}},submitHandler:function(a){!function(a){$(".alert")&&$(".alert").remove(),$.post("/api/pegawai/diklat/update",{data:a,_token:r}).done((function(n){p(a),$('input[name="id_diklat"]').before('<div class="alert alert-success" role="alert">\n  Data berhasil perbarui! \n</div>')})).fail((function(a){})).always((function(a){}))}({nip:t,name:$(a).find('input[name="nama_diklat"]').val(),id:$(a).find('input[name="id_diklat"]').val(),tahun_mengikuti:$(a).find('input[name="tahun_diklat"]').val()})}});$("#form-add-diklat").validate({rules:{nama_diklat:{required:!0},tahun_diklat:{required:!0,minlength:4,maxlength:4,number:!0,yearCheck:!0}},messages:{nama_diklat:{required:"Nama harus diisi"},tahun_diklat:{required:"Tahun harus diisi",minlength:"Panjang tahun minimal 4 karakter",maxlength:"Panjang tahun maksimal 4 karakter",number:"Tahun harus berupa angka"}},submitHandler:function(a){!function(a){$(".alert")&&$(".alert").remove(),$.post("/api/pegawai/diklat/store",{data:a,_token:r}).done((function(n){p(a),document.getElementById("form-add-diklat").reset(),$("#form-add-diklat").prepend('\n            <div class="alert alert-success alert-dismissible fade show" role="alert">\n            Data berhasil ditambahkan! \n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>')})).fail((function(a){$("#form-add-diklat").prepend('\n            <div class="alert alert-danger alert-dismissible fade show" role="alert">\n            Terjadi kesalahan \n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>')}))}({nip:t,name:$(a).find('input[name="nama_diklat"]').val(),id:$(a).find('input[name="id_diklat"]').val(),tahun_mengikuti:$(a).find('input[name="tahun_diklat"]').val()})}})}});